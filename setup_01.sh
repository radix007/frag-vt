#!/bin/env bash
# File : setup_1.sh

echo "---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------"
echo -e "\n"
echo "                                                                                                               FRAG-VT                                                                                                                           "
echo "                                                                                                                                                                                                                             author:radix007 "
echo "---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------"

sleep 1

echo "---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------"
echo -e "\n"
echo "                                                                                                       UPDATING THE REPOS                                                                                                                    "
echo -e "\n"
echo "---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------"

sleep 1

sudo apt-get update

echo "---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------"
echo -e "\n"
echo "                                                                                                 INSTALLING REQUIRED DEPENDENCIES                                                                                                            "
echo -e "\n"
echo "---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------"

sudo apt-get install libnl-3-dev libnl-genl-3-dev libnl-route-3-dev libssl-dev libdbus-1-dev git pkg-config build-essential macchanger net-tools python3-venv aircrack-ng rfkill firmware-atheros aircrack-ng

echo "---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------"
echo -e "\n"
echo "                                                                                          CLONING FRAGATTACKS TOOL INSIDE frag-vt DIRECTORY                                                                                                  "
echo -e "\n"
echo "---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------"
sleep 0.5
mkdir frag-vt
cd frag-vt
git clone https://github.com/vanhoefm/fragattacks.git fragattacks
cd fragattacks/research

echo "---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------"
echo -e "\n"
echo "                                                                                                   RUNNING .build.sh and .pysetp.sh"
echo -e "\n"
echo "---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------"

./build.sh
./pysetup.sh

echo "---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------"
echo -e "\n"
echo "                                                                                                      INSTALLING PATCHED DRIVERS"
echo -e "\n"
echo "---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------"

sudo apt-get install bison flex linux-headers-$(uname -r)
cd ~/frag-vt/
git clone https://github.com/vanhoefm/fragattacks-drivers58.git fragattacks-drivers58
cd fragattacks-drivers58

echo "---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------"
echo -e "\n"
echo "                                                                                                           RUNNING MAKE FILE"
echo -e "\n"
echo "---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------"

sleep 1
make defconfig-wifi
make -j 4
sudo make install
echo "---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------"
echo -e "\n"
echo "                                                                                                    INSTALLING PATCHED ath9k FIRMWARE"
echo -e "\n"
echo "---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------"

sleep 1
cd ~/frag-vt/fragattacks/research/ath9k-firmware/
./install.sh

echo "---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------"
echo -e "\n"
echo "                                                                                                               REBOOTING NOW"
echo -e "\n"
echo "---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------"

sleep 1 
# python3
#pyqt5
# pyinstaller psutil pip 
